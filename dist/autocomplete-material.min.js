angular.module("templates",[]).run(["$templateCache",function(e){e.put("src/templates/autocomplete-list.html","<div>\n    <style>\n        .searchresultspopup-wrapper {\n            margin-top: -19px;\n            position: absolute;\n            z-index: 9999;\n            width: 100%\n        }\n\n        .searchresultspopup {\n            border-radius: 0;\n            border: none;\n            -webkit-box-shadow: 0 8px 17px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n            -moz-box-shadow: 0 8px 17px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n            box-shadow: 0 8px 17px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n            z-index: 1000;\n            float: left;\n            min-width: 100%;\n            padding: 5px 0;\n            margin: 2px 0 0;\n            font-size: 14px;\n            text-align: left;\n            list-style: none;\n            background-color: #fff;\n            -webkit-background-clip: padding-box;\n            background-clip: padding-box;\n            border: 1px solid #ccc;\n            border: 1px solid rgba(0, 0, 0, .15);\n        }\n\n        .searchresultspopup span {\n            display: block;\n            padding: 3px 20px;\n            clear: both;\n            font-weight: normal;\n            line-height: 1.42857143;\n            color: #333;\n            white-space: nowrap;\n        }\n\n        .searchresultspopup li.selected {\n            color: #262626;\n            text-decoration: none;\n            background-color: #f5f5f5;\n        }\n    </style>\n    <div class=\"searchresultspopup-wrapper\">\n        <ul ng-show='visible' ng-if=\"results.length\" class='searchresultspopup'>\n            <li ng-class=\"{ 'selected' : isSelected($index) }\" ng-click='select($index,true)' ng-mousedown='select($index,true)' ng-repeat='result in results'>\n                <span>{{result.display}}</span>\n            </li>\n        </ul>\n        <md-progress-linear ng-if=\"loading\" md-mode=\"indeterminate\"></md-progress-linear>\n    </div>\n</div>\n"),e.put("src/templates/autocomplete-material.html",'<div>\n    <!-- Surrounding DIV for sfField builder to add a sfField directive to. -->\n    <div class="pull-left" ng-controller="autocompleterCtrl" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n        <label>{{form.title}}</label>\n\n        <div style=\'position:relative\'>\n            <live-search \n            type="text" \n            live-search-callback="form.options.asyncCallback"\n            live-search-item-template="{{result.display}}" \n            live-search-select="display" \n            live-search-value="$$value$$" \n            live-search-select-callback="onBlur">\n            </live-search>\n        </div>\n         <div style="margin-top:-10px;" class="help-block" ng-if="hasError()" sf-message="(form.description || \'Required\')"></div>\n        <!-- sf-field-model let\'s the ngModel builder know that you want a ng-model that matches against the form key here -->\n        <!-- schema-validate="form" validates the form against the schema -->\n        <span schema-validate="form" ng-model="$$value$$"></span>\n        <!-- Description & Validation messages -->\n    </div>    \n</div>')}]),angular.module("LiveSearch",["ng"]).directive("liveSearch",["$compile","$timeout","$templateCache",function(e,l,t){return{restrict:"E",replace:!0,scope:{liveSearchCallback:"=",liveSearchSelect:"=?",liveSearchSelectCallback:"=",liveSearchItemTemplate:"@",liveSearchWaitTimeout:"=?",liveSearchMaxResultSize:"=?",liveSearchMaxlength:"=?",liveSearchValue:"="},template:"<input type='text' autocomplete='off'/>",link:function(n,a,r,i){var s;n.results=[],n.visible=!1,n.selectedIndex=-1,n.select=function(e,l){n.selectedFromList=l,n.selectedIndex=e,n.visible=!1},n.isSelected=function(e){return n.selectedIndex===e},n.results=[n.liveSearchValue],n.select(0),n.$watch("selectedIndex",function(e,l){var t=n.results[e];if(t)if(r.liveSearchSelectCallback){var i=n.liveSearchSelectCallback.call(null,{items:n.results,item:t});a.val(i)}else r.liveSearchSelect?a.val(t[r.liveSearchSelect]):a.val(t);t&&"undefined"!==a.controller("ngModel")&&(n.liveSearchValue=t)}),a[0].onblur=function(){if(n.abort=!0,n.manualyAborted=!0,l.cancel(s),!n.selectedFromList){n.visible=!1,n.loading=!1;var e={value:a.val(),display:a.val()};n.results=[e],n.liveSearchSelectCallback.call(null,{items:n.results,item:e}),n.liveSearchValue=e}},a[0].onkeydown=function(e){(e.ctrlKey||e.metaKey)&&e.preventDefault(),n.visible&&(40==e.keyCode?n.selectedIndex+1===n.results.length?n.selectedIndex=0:n.selectedIndex++:38==e.keyCode&&(0===n.selectedIndex?n.selectedIndex=n.results.length-1:-1==n.selectedIndex?n.selectedIndex=0:n.selectedIndex--),13==e.keyCode&&(n.visible=!1,n.selectedFromList=!0),n.$apply())};var o=function(e){if(13==e.keyCode&&a[0].onblur(),13==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode)return!1;var t=angular.element(e.target);l.cancel(s);var r=t.val().split(","),i=r[r.length-1].trim();return i.length<1||null!==n.liveSearchMaxlength&&i.length>n.liveSearchMaxlength?(n.visible=!1,void n.$apply()):void(s=l(function(){var e=[],l=n.liveSearchCallback.call(null,n.$parent.form,i);n.loading=!0,n.abort=!1,n.visible=!1,n.manualyAborted=!1,l.then(function(l){n.abort=!1,l&&(e=l.slice(0,(n.liveSearchMaxResultSize||20)-1))}),l["catch"](function(){n.abort=!0}),l["finally"](function(){return n.abort||n.manualyAborted?void 0:(n.visible=!0,n.loading=!1,n.selectedIndex=-1,void(n.results=e.filter(function(l,t){return e.indexOf(l)==t})))})},n.liveSearchWaitTimeout||100))};a[0].onkeyup=o,n.clear=function(){a.val(null),a[0].onblur()};var c=t.get("src/templates/autocomplete-list.html"),d=e(c)(n);angular.element(a.parent())[0].appendChild(d[0])}}}]),angular.module("autocompleteMaterial",["schemaForm","LiveSearch","templates"]).config(function(e,l){e.defineAddOn("bootstrapDecorator","autocomplete-material","src/templates/autocomplete-material.html",l.stdBuilders)}).controller("autocompleterCtrl",function(e){e.$on("refreshAutocompleter",function(l,t){_.isEqual(e.$parent.form.key,t)&&e.$$childHead.clear()}),e.onBlur=function(l){return e.$$childHead.ngModel=l.item,e.$parent.form.onSelect&&e.$parent.form.onSelect(e),l.item.display}});