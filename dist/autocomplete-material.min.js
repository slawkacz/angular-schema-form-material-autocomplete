angular.module("templates",[]).run(["$templateCache",function(e){e.put("src/templates/autocomplete-list.html","<div>\n    <style>\n        .searchresultspopup-wrapper {\n            margin-top: -19px;\n            position: absolute;\n            z-index: 9999;\n            width: 100%\n        }\n        \n        .searchresultspopup {\n            border-radius: 0;\n            border: none;\n            -webkit-box-shadow: 0 8px 17px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n            -moz-box-shadow: 0 8px 17px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n            box-shadow: 0 8px 17px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n            z-index: 1000;\n            float: left;\n            min-width: 100%;\n            padding: 5px 0;\n            margin: 2px 0 0;\n            font-size: 14px;\n            text-align: left;\n            list-style: none;\n            background-color: #fff;\n            -webkit-background-clip: padding-box;\n            background-clip: padding-box;\n            border: 1px solid #ccc;\n            border: 1px solid rgba(0, 0, 0, .15);\n        }\n        \n        .searchresultspopup span {\n            display: block;\n            padding: 3px 20px;\n            clear: both;\n            font-weight: normal;\n            line-height: 1.42857143;\n            color: #333;\n            white-space: nowrap;\n        }\n        \n        .searchresultspopup li.selected {\n            color: #262626;\n            text-decoration: none;\n            background-color: #f5f5f5;\n        }\n    </style>\n    <div class=\"searchresultspopup-wrapper\">\n        <ul ng-show='visible' ng-if=\"results.length\" class='searchresultspopup'>\n            <li ng-class=\"{ 'selected' : isSelected($index) }\" ng-click='select($index)' ng-repeat='result in results'>\n                <span>{{result.display}}</span>\n            </li>\n        </ul>\n        <md-progress-linear ng-if=\"loading\" md-mode=\"indeterminate\"></md-progress-linear>\n    </div>\n</div>"),e.put("src/templates/autocomplete-material.html",'<div>\n    <!-- Surrounding DIV for sfField builder to add a sfField directive to. -->\n    <div class="pull-left" ng-controller="autocompleterCtrl">\n        <label>{{form.title}}</label>\n\n        <div style=\'position:relative\'>\n            <live-search type="text" live-search-callback="form.options.asyncCallback"\n        live-search-item-template="{{result.display}}" live-search-select="display" live-search-value="$$value$$" live-search-select-callback="onBlur"></live-search>\n        </div>\n        <!-- sf-field-model let\'s the ngModel builder know that you want a ng-model that matches against the form key here -->\n        <!-- schema-validate="form" validates the form against the schema -->\n\n        <!-- Description & Validation messages -->\n    </div>\n</div>')}]),angular.module("LiveSearch",["ng"]).directive("liveSearch",["$compile","$timeout","$templateCache",function(e,l,t){return{restrict:"E",replace:!0,scope:{liveSearchCallback:"=",liveSearchSelect:"=?",liveSearchSelectCallback:"=",liveSearchItemTemplate:"@",liveSearchWaitTimeout:"=?",liveSearchMaxResultSize:"=?",liveSearchMaxlength:"=?",liveSearchValue:"="},template:"<input type='text' autocomplete='off'/>",link:function(n,a,i,r){var o;n.results=[],n.visible=!1,n.selectedIndex=-1,n.select=function(e){n.selectedIndex=e,n.visible=!1},n.isSelected=function(e){return n.selectedIndex===e},n.results=[n.liveSearchValue],n.select(0),n.$watch("selectedIndex",function(e,l){var t=n.results[e];if(t)if(i.liveSearchSelectCallback){var r=n.liveSearchSelectCallback.call(null,{items:n.results,item:t});a.val(r)}else i.liveSearchSelect?a.val(t[i.liveSearchSelect]):a.val(t);t&&"undefined"!==a.controller("ngModel")&&(n.liveSearchValue=t)}),a[0].onblur=function(){n.visible=!1,n.loading=!1,n.abort=!0,n.selectedIndex=-1,n.results=[{value:a.val(),display:a.val()}],console.log(n.results),n.select(0)},a[0].onkeydown=function(e){n.visible&&(40==e.keyCode?n.selectedIndex+1===n.results.length?n.selectedIndex=0:n.selectedIndex++:38==e.keyCode&&(0===n.selectedIndex?n.selectedIndex=n.results.length-1:-1==n.selectedIndex?n.selectedIndex=0:n.selectedIndex--),13==e.keyCode&&(n.visible=!1),n.$apply())},a[0].onkeyup=function(e){if(13==e.keyCode&&a[0].onblur(),13==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode)return!1;var t=angular.element(e.target);l.cancel(o);var i=t.val().split(","),r=i[i.length-1].trim();return r.length<1||null!==n.liveSearchMaxlength&&r.length>n.liveSearchMaxlength?(n.visible=!1,void n.$apply()):void(o=l(function(){var e=[],l=n.liveSearchCallback.call(null,n.$parent.form,r);n.loading=!0,n.abort=!1,n.visible=!1,l.then(function(l){l&&(e=l.slice(0,(n.liveSearchMaxResultSize||20)-1))}),l["finally"](function(){n.abort||(n.visible=!0,n.loading=!1,n.selectedIndex=-1,n.results=e.filter(function(l,t){return e.indexOf(l)==t}))})},n.liveSearchWaitTimeout||100))},n.clear=function(){a.val(null),a[0].onblur()};var s=t.get("src/templates/autocomplete-list.html"),c=e(s)(n);angular.element(a.parent())[0].appendChild(c[0])}}}]),angular.module("autocompleteMaterial",["schemaForm","LiveSearch","templates"]).config(function(e,l){e.defineAddOn("bootstrapDecorator","autocomplete-material","src/templates/autocomplete-material.html",l.stdBuilders)}).controller("autocompleterCtrl",function(e){e.$on("refreshAutocompleter",function(l,t){_.isEqual(e.$parent.form.key,t)&&e.$$childHead.clear()}),e.onBlur=function(l){return e.$$childHead.ngModel=l.item,l.item.display}});